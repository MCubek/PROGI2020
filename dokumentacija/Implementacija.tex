\chapter{Implementacija i korisničko sučelje}
		
		
		\section{Korištene tehnologije i alati}
		
			\begin{longtabu} to \textwidth {|X[6, l+5]|X[30, 1]|X[20, 2]|}
				
				\hline \multicolumn{3}{|c|}{\textbf{Backend}}	 \\[3pt] \hline
				\endfirsthead
				
				\hline
				\endlastfoot
				
				PostgreSQL13 & \href{https://www.postgresql.org/}{https://www.postgresql.org/}	& Relacijska baza podataka. 	\\ \hline
				
				Java 11 & \href{https://www.oracle.com/java/technologies/javase-jdk11-downloads.html}{https://www.oracle.com/java} & Objektno-orijentirani programski jezik.	\\ \hline
				
				Spring/Spring Boot & \href{https://spring.io/}{https://spring.io/} & Java razvojni okriv. 	\\ \hline
				
				Spring Web MVC  & \href{https://spring.io/guides/gs/serving-web-content/}{https://spring.io/guides/gs/serving-web-content/} & Spring web razvojni okvir.	\\ \hline
				
				Spring Security  & \href{https://spring.io/projects/spring-security}{https://spring.io/projects/spring-security} & 
				Spring razvojni okvir za autentifikacija i autorizaciju. 	\\ \hline
				
				Lombok  & \href{https://projectlombok.org/}{https://projectlombok.org/} & Java library automatizaciju repetitivnog koda. 	\\ \hline
				
				H2  & \href{https://www.h2database.com/}{https://www.h2database.com/} & Relacijska baza podataka korištena za testiranje. 	\\ \hline
				
				SpringFox  & \href{https://springfox.github.io/springfox/}{https://springfox.github.io/springfox/} & Automatizirana JSON API dokumentacija. 	\\ \hline
				
				JWT  & \href{https://jwt.io/}{https://jwt.io/} & URL-sigurno prebacivanje tokena autentifikacije. 	\\ \hline
				
				Apache Commons Validator  & \href{https://commons.apache.org/proper/commons-validator/}{https://commons.apache.org/} & Biblioteka validatora. 	\\ \hline
				
			\end{longtabu}
			
			
			
			\eject
			
			\begin{longtabu} to \textwidth {|X[4, l+3]|X[25, l]|X[20, 2]|}
				
				\hline \multicolumn{3}{|c|}{\textbf{Frontend}}	 \\[3pt] \hline
				\endfirsthead
				
				\hline
				\endlastfoot
				
				Angular & \href{https://angular.io/}{https://angular.io/}	& Radni okvir za izgradnju web aplikacija.	\\ \hline
			
				Bootstrap & \href{https://getbootstrap.com/}{https://getbootstrap.com/} & CSS radni okvir za web development.	\\ \hline
				
				NPM & \href{https://www.npmjs.com/}{https://www.npmjs.com/} & Upravitelj paketa za programski jezik JavasScript.	\\ \hline
				
				Typescript & \href{https://www.typescriptlang.org/}{https://www.typescriptlang.org/} & Programski jezik koji se prevodi u JavaScript.	\\ \hline
				
				Leaflet & \href{https://leafletjs.com/}{https://leafletjs.com/} & Javascript library za izgradnju interaktivnih karata.	\\ \hline
				
				Leaflet Routing Machine & \href{https://www.liedman.net/leaflet-routing-machine/}{https://www.liedman.net/leaflet-routing-machine/} & Javascript library za crtanje ruta nad leafletom.	\\ \hline
				
				Open Source Routing Machine & \href{http://project-osrm.org/}{http://project-osrm.org/} & Servis koji računa rutu između zadanih točaka.	\\ \hline
			\end{longtabu}			
			
			
			\begin{longtabu} to \textwidth {|X[4, l+3]|X[25, l]|X[20, 2]|}
				
				\hline \multicolumn{3}{|c|}{\textbf{Komunikacija i Version Control}}	 \\[3pt] \hline
				\endfirsthead
				
				\hline
				\endlastfoot
				
				Slack & \href{https://slack.com/}{https://slack.com/}	& Platforma za komunikaciju članova.	\\ \hline
				GitLab & \href{https://gitlab.com/}{https://gitlab.com/} & Git Repository manager, issue tracker i CI/CD provider.	\\ \hline
			\end{longtabu}
		
			\begin{longtabu} to \textwidth {|X[4, l+3]|X[25, l]|X[20, 2]|}
				
				\hline \multicolumn{3}{|c|}{\textbf{Web poslužitelj}}	 \\[3pt] \hline
				\endfirsthead
				
				\hline
				\endlastfoot
				
				Heroku & \href{https://www.heroku.com/}{https://www.heroku.com/}	& Cloud platforma za deployanje aplikacija.	\\ \hline
			\end{longtabu}
		
			\begin{longtabu} to \textwidth {|X[4, l+3]|X[30, l]|X[20, 2]|}
				
				\hline \multicolumn{3}{|c|}{\textbf{Web poslužitelj}}	 \\[3pt] \hline
				\endfirsthead
				
				\hline
				\endlastfoot
				
				IntelliJ IDEA & \href{https://www.jetbrains.com/idea/}{https://www.jetbrains.com/idea/}	& JAVA IDE.	\\ \hline
				
				WebStorm & \href{https://www.jetbrains.com/webstorm/}{https://www.jetbrains.com/webstorm/}	& JavaScript IDE.	\\ \hline
			\end{longtabu}
			
			
			\eject 
		
	
		\section{Ispitivanje programskog rješenja}
						
			\subsection{Ispitivanje komponenti}
			\textit{Za potrebe testiranja naših Spring backend komponenti koristili smo JUnit testing framework. JUnit nam omogućuje pisanje testova koji se jako brzo izvode pomoću njegovog Mockito frameworka tako da nije potrebno pokrenuti cijelu Spring aplikaciju već možemo falsificirati odgovore nekih metoda koje bi inače razgovarale s bazom. Uz te testove (8-10) napisali smo i integracijske testove (1-6) u kojima koristimo MockMvc kojim simuliramo HTTP zahtjeve na našu backend poslužitelj i na temelju dobivenih HTTP odgovora ispitivamo njihovu ispravnost. Ti testovi zahtijevaju potpuno pokretanje Spring aplikacije te su nešto sporiji. Također napisali smo nekoliko standardnih testova koji ispituju statičke metode. Napisan je i jedan test koji poziva ne-implementiranu funkcionalnost dok ona baca UnsupportedOeprationException, ali on nije prikazan u primjerima ispod i u progamskom je kodu anotacijom onemogućen. Takav test faila pri pokretanju. Od svih testova implementiranih funkcionalnosti prolaze svi i to je vidljivo na slici koja se nalazi na dnu poglavlja.}
			
			\subsubsection{Test 1: Uspješna registracija u sustav}
			Korisnik se registrira u sustav e-mail adresom, korisničkim imenom, lozinkom i URL-om svoje slike. \\
			U ovom testu su svi podatci ispravni, pa stoga poslužitelj treba uspješno izvršiti registraciju korisnika i vratiti statusni kod 200 OK.
			
			\begin{figure}[H]
				\centering
				\includegraphics[scale=0.75]{slike/test1} \\
				\caption{ Test registracije u sustav ispravnim podacima}
				\label{fig:test1}
			\end{figure}
		
		
			\subsubsection{Test 2: Neuspješna registracija u sustav radi zauzetog korisničkog imena}
			Korisnik se pokuša registrirati u sustav imenom koje je zauzeto. \\
			Poslužitelj javlja da registracija nije uspjela,
			a klijentu se prikazuje tost koji se pojavljuje u gornjem desnom kutu ekrana.
			
			\begin{figure}[H]
				\centering
				\includegraphics[scale=0.75]{slike/test2} \\
				\caption{ Test registracije u sustav zauzetim korisničkim imenom}
				\label{fig:test2}
			\end{figure}
		
			\subsubsection{Test 3: Neuspješna registracija u sustav radi lošeg URL-a slike}
			Korisnik se pokuša registrirati u sustav URL-om svoje slike koji je možda ispravno napisan, ali slika s tim URL-om nije dohvatljiva. \\
			Poslužitelj javlja da registracija nije uspjela, a klijentu se prikazuje tost koji se pojavljuje u gornjem desnom kutu ekrana.
			
			\begin{figure}[H]
				\centering
				\includegraphics[scale=0.75]{slike/test3} \\
				\caption{ Test registracije u sustav lošim URL-om slike}
				\label{fig:test3}
			\end{figure}
		
			\subsubsection{Test 4: Uspješna prijava za kartografa}
			Korisnik se prijavljuje za kartografa u sustav IBAN brojem računa i URL-slikom svoje osobne iskaznice. \\
			U ovom testu su svi podatci ispravni, pa stoga poslužitelj treba uspješno pohraniti prijavu korisnika za kartografa i vratiti statusni kod 200 OK.
			
			\begin{figure}[H]
				\centering
				\includegraphics[scale=0.75]{slike/test4} \\
				\caption{ Test prijave za kartografa ispravnim podacima}
				\label{fig:test4}
			\end{figure}
		
			\subsubsection{Test 5: Uspješna prijava u sustav}
			Korisnik se prijavljuje u sustav korisničkim imenom i lozinkom. \\
			U ovom testu su svi podatci ispravni, pa stoga poslužitelj treba uspješno izvršiti prijavu korisnika i vratiti statusni kod 200 OK.
			
			\begin{figure}[H]
				\centering
				\includegraphics[scale=0.75]{slike/test5} \\
				\caption{ Test prijave u sustav ispravnim podacima}
				\label{fig:test5}
			\end{figure}
		
			\subsubsection{Test 6: Neuspješna prijava u sustav radi neispravnih podataka}
			Korisnik se pokuša prijaviti u sustav sa neispravnom kombinacijom korisničkog imena i lozinke. \\
			Poslužitelj baca iznimku tipa BadCredentialsException a klijentu javlja da prijava nije uspjela.
			
			\begin{figure}[H]
				\centering
				\includegraphics[scale=0.75]{slike/test6} \\
				\caption{ Test prijave u sustav neispravnim podacima}
				\label{fig:test6}
			\end{figure}
		
			\eject
		
			\subsubsection{Test 7: Parsiranje i ispisivajne koordinata}
			Ispitivanje metode koja parsira String u Point2D.Double u kojem čuvamo lokacije. \\
			Također ispitivanje da se lokacija iz klase Point2D.Double dobro ispisuje kao string.
		
			\begin{figure}[H]
				\centering
				\includegraphics[scale=0.65]{slike/test7} \\
				\caption{ Test parsiranja i pretvaranje lokaciju u String }
				\label{fig:test7}
			\end{figure}
		
			\subsubsection{Test 8: Osvajanje karte ne radi ukoliko je igrač predaleko od nje}
			Ispitivanje metode koja se poziva prilikom osvajanja karte i očekivanje da će baciti exception koji znači da se karta nije mogla osvojiti zbog udaljenosti od igrača.
			
			\begin{figure}[H]
				\centering
				\includegraphics[scale=0.55]{slike/test8} \\
				\caption{ Test osvajanja karte koji baca exception ukoliko je igrač predaleko }
				\label{fig:test8}
			\end{figure}
		
			\subsubsection{Test 9: Osvajanje karte ne radi ništa ukoliko je igrač već ima}
			Ispitivanje metode koja se poziva prilikom osvajanja karte i očekivanje da ona neće napraviti nikakvu akciju spremanja u bazu podataka ukoliko igrač koji pokušava osvojiti kartu nju već posjeduje.
			
			\begin{figure}[H]
				\centering
				\includegraphics[scale=0.55]{slike/test9} \\
				\caption{ Test osvajanja karte koji provjerava da se ne poziva spremanje u bazu ukoliko igrač posjeduje kartu}
				\label{fig:test9}
			\end{figure}
		
			\subsubsection{Test 10: Osvajanje karte uspješno sprema kartu}
			Ispitivanje metode uspješnog spremanja relacije karta-igrač u bazu podataka kod njenog osvajanja.
			
			\begin{figure}[H]
				\centering
				\includegraphics[scale=0.55]{slike/test10} \\
				\caption{ Test uspješnog spremanja u bazu podataka kod osvajanja}
				\label{fig:test10}
			\end{figure}
		
			\subsubsection{Test 11: Test računanja daljine između dvije lokacije}
			Ispitivanje metode koja računa zračnu udaljenost između svije geografske lokacije.
			Lokacija se uspoređuje s poznatom udaljenosti u kilometrima između neke dvije točke.
			
			\begin{figure}[H]
				\centering
				\includegraphics[scale=0.70]{slike/test11} \\
				\caption{ Test uspješnog spremanja u bazu podataka kod osvajanja}
				\label{fig:test10}
			\end{figure}
			
			\begin{figure}[H]
				\centering
				\includegraphics[scale=1]{slike/ishodTestova} \\
				\caption{ Rezultati izvođenja svih napisanih testova}
				\label{fig:ishodTestova}
			\end{figure}
			
			\eject
			
			\subsection{Ispitivanje sustava}
			
			 \textit{Potrebno je provesti i opisati ispitivanje sustava koristeći radni okvir Selenium\footnote{\url{https://www.seleniumhq.org/}}. Razraditi \textbf{minimalno 4 ispitna slučaja} u kojima će se ispitati redovni slučajevi, rubni uvjeti te poziv funkcionalnosti koja nije implementirana/izaziva pogrešku kako bi se vidjelo na koji način sustav reagira kada nešto nije u potpunosti ostvareno. Ispitni slučaj se treba sastojati od ulaza (npr. korisničko ime i lozinka), očekivanog izlaza ili rezultata, koraka ispitivanja i dobivenog izlaza ili rezultata.\\ }
			 
			 \textit{Izradu ispitnih slučajeva pomoću radnog okvira Selenium moguće je provesti pomoću jednog od sljedeća dva alata:}
			 \begin{itemize}
			 	\item \textit{dodatak za preglednik \textbf{Selenium IDE} - snimanje korisnikovih akcija radi automatskog ponavljanja ispita	}
			 	\item \textit{\textbf{Selenium WebDriver} - podrška za pisanje ispita u jezicima Java, C\#, PHP koristeći posebno programsko sučelje.}
			 \end{itemize}
		 	\textit{Detalji o korištenju alata Selenium bit će prikazani na posebnom predavanju tijekom semestra.}
			
			\eject 
		
		
		\section{Dijagram razmještaja}
			
			\textbf{\textit{dio 2. revizije}}
			
			 \textit{Potrebno je umetnuti \textbf{specifikacijski} dijagram razmještaja i opisati ga. Moguće je umjesto specifikacijskog dijagrama razmještaja umetnuti dijagram razmještaja instanci, pod uvjetom da taj dijagram bolje opisuje neki važniji dio sustava.}
			
			\eject 
		
		\section{Upute za puštanje u pogon}
		
			\textit{Za puštanje u pogon GeoFighter aplikacije iz izvornog kôda potrebno je nekoliko preduvjeta: \textbf{PostgreSQL13, JDK11 i Node.js 15}. Uz sve te aplikacije skinute i instalirane lako je kompajlirati i aplikaciju pokrenuti na vlastitom računalu. Aplikacija je također pokrenuta na javno dostupnom poslužitelju \textbf{Heroku} o čemu piše više u nastavku.\\}
			
			\textbf{\textit{Koraci za pokretanje na lokalnom računalu:}}
			
			\begin{itemize}
				
				\item U PostgreSQL DBMSu stvoriti novu bazu podataka te zapisati njeno ime(baze podataka) uz ime korisnika-vlasnika baze podataka, njegove šifre i portu baze.
				
				\item Unutar root direktorija otvoriti datoteku čiji je path\\ \textit{/izvorniKod/geoFighterSpring/src/main/resources/application-local.properties}\\ i unutar nje promijeniti sljedeće parametre: \begin{packed_enum}
					
					\item \textit{spring.datasource} parametre sa parametrima novo-kreirane baze podataka. (Voditi brigu o portu, imenu baze podataka, te korisničkom imenu i lozinci vlasnika te baze)
					
					\item \textit{spring.mail} parametre sa parametrima željenog mail servisa kako bi se mogli slati mailovi potvrde. (mail servis može biti javan kao što je trenutni \textit{gmail}, a moguće je koristiti testni kao što je \textit{mailtrap}\\ \url{https://mailtrap.io})
				\end{packed_enum}
			
				\begin{figure}[H]
					\centering
					\includegraphics[scale=0.4]{slike/Properties} \\%veličina u odnosu na širinu linije
					\caption{Što promijeniti u application-local.properties}
					\label{fig:properties} %label mora biti drugaciji za svaku sliku
				\end{figure}
			
				
				\item Otvoriti konzolu i pozicionirati se unutar \textit{/izvorniKod/geoFighterSpring/} i pokrenuti naredbu \textit{"./gradlew bootRun -Dspring.profiles.active=local"} s kojom se izkompajlira i pokrene backend servis.
				
				\item Otvoriti drugu konzolu i pozicionirati se unutar \textit{/izvorniKod/angular-geofighter/} i pokrenuti naredbu \textit{"npm install"} s kojom se instaliraju sve potrebno za frontend servis. Zatim pokrenuti naredbu \textit{"ng build"}, te na kraju \textit{"npm start"} kojim se pokreće frontend servis na portu 4200.
				
				\item Ukoliko su pokrenuti backend i frontend servis i ne javlju se greške u konzoli, aplikacija je spremna za korištenje na lokalnom računalu.\\\\
				
			\end{itemize}
		
			
			\textit{Aplikacija je puštena u pogon na javno dostupnom poslužitelju \textbf{Heroku} tako da su sve tri komponente (DB, FrontEnd i BackEnd) tamo pokrenute i moguće joj je pristupiti sa linka:}\\
			\url{https://angularfrontend-release.herokuapp.com/}\\
						
			\textit{GitLab repozitorij \url{https://gitlab.com/MatejC_FER/pi} također sadrži CI/CD (Continuous integration and continuous delivery) implementiran pomoću kojeg se pri svakom commitu na \textbf{Master} branch automatski aplikacija izgradila i deployala na \textbf{Heroku} javni poslužitelj. Tako nije potrebno lokalno pokretati aplikaciju nakon izmjena, već je dovoljno na repozitorij pohraniti primjene.}
			
			
			\eject 